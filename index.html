<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title id="pageTitle">Dictionnaire Tadaksahak Multilingue</title>

  <link rel="icon" href="images/idaksahak_round.png" type="image/png" />
  <meta name="description" content="Vocabulaire Tadaksahak en audio avec traduction multilingue." />
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/fuse.js/dist/fuse.js"></script>
  <script defer src="app.js"></script>
</head>

<body>
  <!-- Effets sp√©ciaux -->
  <div class="sandstorm"></div>
  <div class="sandstorm2"></div>
  <div class="sandstorm3"></div>

  <!-- Livre -->
  <div class="opened-book-container" aria-label="Livre ouvert Tadaksahak">
    <div class="opened-book">
      <div class="book-page left-page"><span class="book-title">Adak</span></div>
      <div class="book-binding"></div>
      <div class="book-page right-page"><span class="book-author">sahak</span></div>
      <div class="book-shadow"></div>
    </div>
  </div>

  <main>
    <div class="logo" style="text-align: center; margin-bottom: 1em;">
      <img src="images/idaksahak_round.png" alt="Logo Tadaksahak rond" width="120" />
    </div>

    <section style="margin-bottom: 2em;"><p id="textePresentation"></p></section>
    <h1 id="titrePrincipal" style="text-align:center; font-size:2.1em; margin-bottom:0.7em;"></h1>

    <!-- Recherche -->
    <section style="margin-bottom: 2em;">
      <input id="searchBar" type="text" placeholder="" oninput="rechercherMot()" aria-label="Zone de recherche" style="width: 100%; max-width: 400px; margin: auto; display: block;" />
      <h2 id="motTexte" style="margin-top:1.2em;">...</h2>
      <p id="definition">...</p>

      <!-- Navigation -->
      <nav id="navigation" aria-label="Navigation entre les mots" style="text-align:center; margin-top:1em;">
        <button id="btnPrev" onclick="motPrecedent()"></button>
        <button id="btnNext" onclick="motSuivant()"></button>
      </nav>

      <!-- üåê S√©lecteur de langue -->
      <button id="openLangModal" class="lang-btn-trigger">üåê Choisir la langue</button>

      <p id="compteur" style="text-align:center;">1 / ...</p>

      <!-- Audio -->
      <div id="audioButtons" style="text-align:center;">
        <button id="btnPlay" onclick="jouerTadaksahak()"></button>
        <button id="btnReplay" onclick="rejouerMot()" disabled style="opacity: 0.5;"></button>
        <button id="btnAuto" onclick="lectureAuto()" disabled style="opacity: 0.5;"></button>
      </div>
    </section>

    <!-- Chat -->
    <section aria-labelledby="chat-title" style="margin-top: 2rem;">
      <h2 id="chat-title"></h2>
      <div id="chatWindow" class="chatbox" role="log" aria-live="polite"></div>
      <div id="botIntro" style="margin: 1.5em 0; color: #0a5780; font-weight: bold;"></div>
      <input type="text" id="chatInput" placeholder="" onkeydown="if(event.key==='Enter') envoyerMessage()" aria-label="Zone de saisie du chat" style="width: 100%; max-width: 500px;" />
      <button id="btnEnvoyer" onclick="envoyerMessage()"></button>
    </section>

    <!-- Histoire -->
    <section><h2 id="histoire-title"></h2><p id="histoire-message"></p></section>

    <!-- Archives -->
    <section>
      <h2 id="archives-title">Section Archives</h2>
      <p id="archives-message">Nous mettrons prochainement √† votre disposition des documents anciens pr√©cieux, t√©moins de l‚Äôhistoire de la communaut√©.</p>
    </section>
  </main>

  <!-- Footer -->
  <footer>
    <section style="margin-bottom: 1em;">
      <p id="footerContrib">
        Peu importe la forme ou la taille, chaque contribution ‚Äî documents, t√©moignages, recherches ou id√©es ‚Äî est pr√©cieuse pour enrichir notre projet.<br>
        Nous recherchons aussi des sponsors et partenaires engag√©s pour soutenir la valorisation de la langue et culture Tadaksahak.<br>
        Ensemble, faisons grandir ce patrimoine unique et transmettons-le aux g√©n√©rations futures.
      </p>
      <p style="margin:0.7em 0;">
        <a href="mailto:hamadineagmoctar@gmail.com" style="text-decoration:none; margin-right:1.5em;">
          <img src="images/Gmail.png" alt="Gmail" style="height:1.1em;vertical-align:middle; margin-right:0.3em;">
          <span id="contact">Gmail</span> hamadineagmoctar@gmail.com
        </a>
        <a href="https://wa.me/22786762903" target="_blank" style="text-decoration:none;">
          <img src="images/whatsapp.png" alt="WhatsApp" style="height:1.1em;vertical-align:middle; margin-right:0.3em;">
          <span id="contactWhatsApp">WhatsApp</span> +227 86762903
        </a>
      </p>
      <div id="liensURL" style="margin-top:0.7em;"></div>
    </section>
    <p id="footerText"></p>
  </footer>

  <!-- üåê MODAL langue -->
  <div id="langModal" class="modal-overlay">
    <div class="modal-box">
      <h2>S√©lectionner la langue de l'application</h2>
      <div class="lang-circle-group" id="langSelector"></div>
      <button id="closeLangModal" class="modal-close">Terminer</button>
    </div>
  </div>

  <!-- JS MODAL langue -->
  <script>
    const supportedLangs = {
      fr: { name: "Fran√ßais", flag: "fr" },
      en: { name: "English", flag: "gb" },
      ar: { name: "ÿßŸÑÿπÿ±ÿ®Ÿäÿ©", flag: "sa" },
      ru: { name: "–†—É—Å—Å–∫–∏–π", flag: "ru" },
      de: { name: "Deutsch", flag: "de" },
      es: { name: "Espa√±ol", flag: "es" },
      it: { name: "Italiano", flag: "it" },
      nl: { name: "Nederlands", flag: "nl" },
      da: { name: "Dansk", flag: "dk" },
      cs: { name: "ƒåe≈°tina", flag: "cz" },
      pt: { name: "Portugu√™s", flag: "pt" },
      tr: { name: "T√ºrk√ße", flag: "tr" },
      ja: { name: "Êó•Êú¨Ë™û", flag: "jp" },
      zh: { name: "‰∏≠Êñá", flag: "cn" },
      hi: { name: "‡§π‡§ø‡§®‡•ç‡§¶‡•Ä", flag: "in" },
      sw: { name: "Kiswahili", flag: "tz" }
    };

    const modal = document.getElementById("langModal");
    const selector = document.getElementById("langSelector");

    for (const [code, data] of Object.entries(supportedLangs)) {
      const btn = document.createElement("button");
      btn.className = "lang-circle";
      btn.onclick = () => changerLangueInterface(code);
      btn.innerHTML = `
        <img src="https://flagcdn.com/${data.flag}.svg" alt="${data.name}" />
        <span>${code.toUpperCase()}</span>
      `;
      selector.appendChild(btn);
    }

    document.getElementById("openLangModal").onclick = () => modal.classList.add("show");
    document.getElementById("closeLangModal").onclick = () => modal.classList.remove("show");

    window.addEventListener("DOMContentLoaded", () => {
      const lang = navigator.language.slice(0, 2).toLowerCase();
      if (supportedLangs[lang]) changerLangueInterface(lang);
    });
  </script>
</body>
</html>
